{% extends "medidores/base_medidores.html" %}

{% block title %}Confirmar Cambio de Estado{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto mt-10">
    
    <!-- Tarjeta Principal -->
    <div class="card bg-base-100 shadow-xl border border-base-200">
        <div class="card-body p-8">
            
            <!-- Encabezado con Icono -->
            <div class="text-center mb-6">
                <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-info/10 text-info mb-4">
                    <i class="bi bi-arrow-repeat text-3xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-base-content">Cambiar Estado</h2>
                <p class="text-base-content/70 mt-1">
                    Medidor Serial: <span class="font-mono font-bold text-primary">{{ medidor.codigo_serial }}</span>
                </p>
            </div>

            <!-- Formulario -->
            <form method="post">
                {% csrf_token %}
                
                <div class="form-control w-full mb-8">
                    <label for="nuevo_estado" class="label">
                        <span class="label-text font-semibold">Seleccionar nuevo estado</span>
                    </label>
                    <select name="nuevo_estado" id="nuevo_estado" class="select select-bordered w-full focus:select-info bg-base-100 text-base">
                        {% for estado, label in estados %}
                        <option value="{{ estado }}" {% if medidor.estado == estado %}selected{% endif %}>
                            {{ label }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Botones de AcciÃ³n -->
                <div class="flex flex-col-reverse sm:flex-row gap-3 mt-2">
                    <a href="{% url 'medidores:historial_medidores' %}" class="btn btn-ghost w-full sm:w-1/2 hover:bg-base-200">
                        <i class="bi bi-arrow-left"></i> Cancelar
                    </a>
                    
                    <button type="submit" class="btn btn-primary w-full sm:w-1/2 text-white shadow-md">
                        <i class="bi bi-check-lg"></i> Confirmar
                    </button>
                </div>
            </form>

        </div>
    </div>
</div>
{% endblock %}